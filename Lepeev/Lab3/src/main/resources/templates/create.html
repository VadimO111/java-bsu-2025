<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Nonogram Generator</title>
    <style>
        body { background: #f0f2f5; color: #333; font-family: 'Segoe UI', sans-serif; text-align: center; padding: 20px;}
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; z-index: 10; }
        input[type="text"] { padding: 12px; margin: 10px 0; width: 90%; border: 1px solid #ddd; border-radius: 5px; }
        input[type="number"], select { padding: 8px; border-radius: 5px; border: 1px solid #ddd; }
        button.gen-btn { background: #3498db; color: white; border: none; padding: 12px 30px; font-size: 18px; font-weight: bold; border-radius: 5px; cursor: pointer; margin-top: 15px; }
        .mascot { position: fixed; bottom: 0; right: 0; height: 350px; z-index: 100; pointer-events: none;}
        .error-msg { background: #ff7675; color: white; padding: 10px; border-radius: 5px; margin-bottom: 20px; }
    </style>
</head>
<body>
<div class="container">
    <h1>Nonogram Generator</h1>
    <div th:if="${error}" class="error-msg" th:text="${error}"></div>
    <form action="/create" method="post">
        <label>Preset:</label>
        <select id="presetSelect" onchange="updateUrl(this.value)">
            <option value="">Custom URL</option>
            <option value="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heart_coraz%C3%B3n.svg/240px-Heart_coraz%C3%B3n.svg.png">‚ù§Ô∏è Heart</option>
            <option value="https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Red_Apple.jpg/240px-Red_Apple.jpg">üçé Apple</option>
        </select><br>
        <input type="text" id="imgUrl" name="imageUrl" required oninput="checkUrl()" value="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heart_coraz%C3%B3n.svg/240px-Heart_coraz%C3%B3n.svg.png">
        <br>
        <label>Grid Size:</label> <input type="number" name="size" value="15" min="5" max="100">
        <label>Colors:</label> <input type="number" name="numColors" value="2" min="1" max="25">
        <br><button type="submit" class="gen-btn">GENERATE</button>
    </form>
    <hr>
    <h3>History</h3>
    <form action="/clear" method="post"><button type="submit">Clear History</button></form>
    <div th:each="cw : ${crosswords}"><a th:href="@{/solve/{id}(id=${cw.id})}" th:text="'Puzzle #' + ${cw.id}"></a></div>
</div>
<img src="https://media1.tenor.com/m/fA2ac6r1cTQAAAAC/zero-two-darling-in-the-franxx.gif" class="mascot">
<script>
    function updateUrl(val) {
        if (val) document.getElementById('imgUrl').value = val;
    }
    function checkUrl() {
        const input = document.getElementById('imgUrl');
        const select = document.getElementById('presetSelect');
        let found = false;
        for (let i = 0; i < select.options.length; i++) {
            if (select.options[i].value && select.options[i].value === input.value) {
                select.selectedIndex = i;
                found = true;
                break;
            }
        }
        if (!found) select.selectedIndex = 0;
    }
    checkUrl();
</script>
</body>
</html>